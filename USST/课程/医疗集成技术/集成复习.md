# 知识

## 背景

### 【作业】电子病历系统功能应用水平分为几级？各级主要内涵是什么？

卫生部电子病历应用水平分级

- 0级：未形成电子病历系统
- 1级：部门内初步数据采集
- 2级：部门内数据交换
- 3级：部门间数据交换，初级医疗决策支持
- 4级：全院信息共享，中级医疗决策支持
- 5级：统一数据管理，各部门系统数据集成，基本建立以电子病历为基础的医院信息平台
- 6级：全流程医疗数据闭环管理，高级医疗决策支持
- 7级：完整病历系统，区域医疗信息共享

**名词解释**

- HL7：医疗信息交换标准
- DICOM： 医学数字成像和数字标准
- IHE： 医疗健康信息集成规范
- ICD： 国际疾病分类
- LOINC：观测指标标识符逻辑命名与编码系统
- SNOMED-CT： 医学系统

- UMLS： 统一医学语言系统
- CDA： 临床文档架构                                                                                                                                                                                                                     
- FHIR： 快捷式医疗健康互操作性资源                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       

## 第一章 医疗信息交换标准HL7

### 【作业】HL7消息是如何组成的？HL7的编码规则是什么

|                                      | 消息       |         |
| ------------------------------------ | ---------- | ------- |
| 消息段1                              | .......... | 消息段n |
| 段名 \| 字段1............字段n       |            |         |
| 组件1^组件2^组件3.............^组件n |            |         |
| 子组件1&子组件2.............&子组件n |            |         |

```chinese
消息是系统间传输数据的最小单位，由一组有规定次序的段组成
每个事件对应一个消息
```

```Chinese
段终止符：<CR>
字段分隔符："|"
字段重复分隔符：”~“
组件分隔符：”^"
子组件分隔符："&"
```

## 段

```Chinese
[]可选
{}可重复
段以<CE>结束ASCII码为OXOD
```

```CHinese
常用段名：
MSA：消息确认
MSH：消息头
EVN：事件类型
PID：患者标识
ORC：通用医嘱控制
```

## 字段

### 【作业】HL3消息中段及字段的可选性与重复性有哪些规定？

段：[]:可选 {}：可重复   无标记：必须

字段：可选性：R（必须）O（可选）C（某些触发事件）X（非该触发事件）B（老版本见兼容）

​			重复性：N或空白：不可重复 Y：字段重复次数不限 整数：最多可重复次数

### 数据类型

#### 文本ST

#### 数值NM

#### 用户定义表的编码值IS

#### HL7定义表的编码值ID

......................................

| 简单类型 | ST,NM,ID,IS,DT,TM.SI,TN,TX,FT,TS |
| -------- | -------------------------------- |
| 复杂类型 | FN,PN,XCN,HD,VID                 |

### HL7通信

*无错误传输，字符转换，消息长度*

**最小底层协议**

```
<SB>data<EB><CR>
<SB>块开始
<EB>块结束
<CR>回车
```

消息确认模式：

- 确认原始模式：接收方收到消息后，被要求立即处理并同时回应消息
- 确认增强模式：接收确认，应用程序确认

#### 【作业】如何用组合模式设计HL7消息处理类？

组合模式包含抽象构建，容器构件和叶子构建

容器构件：

- 消息
- 段
- 复合类型字段，组件，子组件

叶子构件：

- 简单类型字段
- 组件
- 子组件

#### 【作业】MLLP协议是如何规定的？起什么作用？

```
<SB>data<EB><CR>
<SB>块开始
<EB>块结束
<CR>回车
```

MLLP相当于会话层封装协议，在TCP/IP之上标示HL7

#### 【作业】HL7消息确认模式有哪几种？如何设置？

- 确认原始模式：接收方收到消息后，被要求立即处理并同时回应消息
- 确认增强模式：接收确认，应用程序确认

MSH-15，16字段设置确认类型

### 患者管理ADT

Admit:患者挂号/入院

Discharge：患者出院

Transfer：患者转院

#### MSH消息头段

#### EVN事件类型段

#### PID患者身份标识段

#### PV1患者就诊段

#### M11校验运算和身份证校验运算码

#### 【作业】什么是状态模式？如何使用状态模式设计MLLP处理类？

将对象的状态从该对象中分离出来，封装到专门的状态类中，使得对象状态可以灵活变化；对于客户端而言，无需关心对象状态的转换以及对象所处的当前状态，无论对于何种状态的对象，客户端都可以一致处理

状态模式：

- 环境类
- 抽象状态类
- 具体状态类